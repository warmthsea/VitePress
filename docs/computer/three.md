# 第三章 存储、中断、总线与I/O系统


##  一、 存储系统的基本要求和并行主存系统

1、存储系统的基本要求
  - `大容量`、`高速度`和`低价格`
  - 单一工艺的存储器无法同时满足,为了弥补CPU与存储器在速度上的差异，一条途径是在组成上引入并行和重叠技术，构成并行主存系统，但单靠这一种方式效果是有限。

2、并行主存系统
  - 单体多字存储器： Bm = W×4/TM
  - 多体单字交叉存储器：
    - 能并行读出多个 CPU 字的单体多字和多体单字、多体多字的交叉访问主存系统统称为并行主存系统。

##  二、 中断系统

CPU中止正在执行的程序，转去处理随机提出的请求，待处理完后，再回到原先被打断的程序继续恢复执行的过程称为`中断`。
中断分为`内部中断`、`外部中断`和`软件中断`三类。

1、中断的分类和分级
   - 引起中断的各种事件称为`中断源`。
   - 中断源向中断系统发出请求中断的申请，称为`中断请求`。
   - 所谓`中断响应`就是允许其中断CPU现行程序的运行，转去对该请求进行预处理，包括保存好断点现场，调出有关处理该中断的中断处理程序，准备运行。
   - **中断的分类**★
     - 优化中断处理：`对每一类给定一个中断处理程序入口`
     - 以IBM 370为例，它把中断分成`机器校验（1级）`、`管理程序调用（2级）`、`程序性（2级）`、`外部`、`输入/输出`和`重新启动`6 类。

2、中断的响应次序与处理次序★
   - 基本规则
     - 一个中断只能被比它高等级的中断打断

3、中断系统的软、硬件功能分配
   -  中断系统的功能包括`中断请求的保存和清除`、`优先级的确定`、`中断断点及现场的保存`、`对中断请求的分析和处理以及中断返回`等，这些全是由中断响应硬件和中断处理程序共同完成的。因此，中断系统的软、硬件功能分配实质上就是`中断处理程序软件`和`中断响应硬件`的功能分配。

## 总线系统

1、总线的分类
   - 总线的定义：用于互连计算机、CPU、存储器、I/O接口及外围设备间的信息传送通路。
   - 总线的分类 ★
     - （1）就允许信息传送的方向来说，总线可以有单向传输和双向传输两种。 双向传输又有半双向和全双向的不同。
     - （2）总线按其用法可以分成`专用`的和`非专用`的。 
     - 只连接一对物理部件的总线称为专用总线。如果N个部件用双向专用总线在所有可能路径都互连，则需`N×(N -1)/2`组总线。
  
2、总线的控制方式★
   - （1）集中控制与分布式控制
   - （2）集中控制的方式
     - 集中控制方式可分为`集中式串行链接`、`集中式定时查询`和`集中式独立请求`3种。
  
3、总线的通信技术
   - 同步通信和异步通信

4、数据宽度和总线线数
   - 数据宽度指的是`I/O设备取得I/O总线使用权后所传送数据的总量`。传送完后就释放总线，重新开始分配总线。所以，它不同于`前面讲过的数据通路宽度`。 
   - `数据通路宽度`指的是数据传送的物理宽度，即一个时钟周期所传送的信息量， 它直接取决于数据总线的线数。